(this.webpackJsonpntwitter=this.webpackJsonpntwitter||[]).push([[0],{66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n.n(a),c=n(44),s=n.n(c),i=n(0),o=n.n(i),u=n(1),l=n(11),j=n(30),b=n(15),d=n(45),p=n(49),O=n(46),f=n(50),h=d.a({apiKey:"AIzaSyAeCcG1YDmulX-lZW2WQMk1T819L6TMXzU",authDomain:"ntwitter-ca13b.firebaseapp.com",projectId:"ntwitter-ca13b",storageBucket:"ntwitter-ca13b.appspot.com",messagingSenderId:"185385454697",appId:"1:185385454697:web:3478f16d251f49a1fda6f8"}),m=p,x=O,g=f,v=n(6),w=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(l.a)(c,2),i=s[0],j=s[1],b=Object(a.useState)(!0),d=Object(l.a)(b,2),p=d[0],O=d[1],f=Object(a.useState)(""),h=Object(l.a)(f,2),x=h[0],g=h[1],w=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?(r(a),console.log("email")):"password"===n&&(j(a),console.log("password"))},y=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!p){e.next=8;break}return e.next=5,m.createUserWithEmailAndPassword(m.getAuth(),n,i);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,m.signInWithEmailAndPassword(m.getAuth(),n,i);case 10:a=e.sent;case 11:console.log("In Auth.js > onSubmit()"),console.log(a),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),g(e.t0.message),console.log(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("form",{onSubmit:y,className:"container",children:[Object(v.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:n,onChange:w,className:"authInput"}),Object(v.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:i,onChange:w,className:"authInput"}),Object(v.jsx)("input",{type:"submit",value:p?"Create Account":"Log In",className:"authInput authSubmit"}),x&&Object(v.jsx)("span",{className:"authError",children:x})]}),Object(v.jsx)("span",{onClick:function(){O((function(e){return!e}))},className:"authSwitch",children:p?"Log In":"Sign in"})]})},y=n(23),N=n(31),k=function(){var e=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.getAuth(),"google"===(a=t.target.name)?r=new m.GoogleAuthProvider:"github"===a&&(r=new m.GithubAuthProvider),e.next=5,m.signInWithPopup(n,r);case 5:c=e.sent,console.log(c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"authContainer",children:[Object(v.jsx)(y.a,{icon:N.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(v.jsx)(w,{}),Object(v.jsxs)("div",{className:"authBtns",children:[Object(v.jsxs)("button",{onClick:e,name:"google",className:"authBtn",children:["Continue with Google",Object(v.jsx)(y.a,{icon:N.b})]}),Object(v.jsxs)("button",{onClick:e,name:"github",className:"authBtn",children:["Continue with Github ",Object(v.jsx)(y.a,{icon:N.a})]})]})]})},S=n(36),A=n(26),I=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(e.nweetObj.text),i=Object(l.a)(s,2),j=i[0],b=i[1],d=function(){var t=Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete this nweet?")){t.next=8;break}return t.next=4,x.deleteDoc(x.doc(x.getFirestore(),"nweets","".concat(e.nweetObj.id)));case 4:if(""===e.nweetObj.attachmentUrl){t.next=8;break}return n=g.ref(g.getStorage(),e.nweetObj.attachmentUrl),t.next=8,g.deleteObject(n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){c((function(e){return!e}))},O=function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,x.updateDoc(x.doc(x.getFirestore(),"nweets","".concat(e.nweetObj.id)),{text:j});case 3:c(!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"nweet",children:r?Object(v.jsx)(v.Fragment,{children:e.isOwner&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("form",{onSubmit:O,className:"container nweetEdit",children:[Object(v.jsx)("input",{type:"text",placeholder:"Edit your nweet",value:j,required:!0,onChange:function(e){var t=e.target.value;b(t)},autoFocus:!0,className:"formInput"}),Object(v.jsx)("input",{type:"submit",value:"Update Nweet",className:"formBtn"})]}),Object(v.jsx)("span",{onClick:p,className:"formBtn cancelBtn",children:"Cancel"})]})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:e.nweetObj.text}),e.nweetObj.attachmentUrl&&Object(v.jsx)("img",{src:e.nweetObj.attachmentUrl}),e.isOwner&&Object(v.jsxs)("div",{className:"nweet__actions",children:[Object(v.jsx)("span",{onClick:d,children:Object(v.jsx)(y.a,{icon:A.d})}),Object(v.jsx)("span",{onClick:p,children:Object(v.jsx)(y.a,{icon:A.a})})]})]})})},C=n(69),F=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(l.a)(s,2),j=i[0],b=i[1],d=function(){var t=Object(u.a)(o.a.mark((function t(n){var a,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==r){t.next=2;break}return t.abrupt("return");case 2:if(n.preventDefault(),a="",""===j){t.next=12;break}return s=g.ref(g.getStorage(),"".concat(e.userObj.uid,"/").concat(Object(C.a)())),t.next=8,g.uploadString(s,j,"data_url");case 8:return i=t.sent,t.next=11,g.getDownloadURL(i.ref);case 11:a=t.sent;case 12:return t.next=14,x.addDoc(x.collection(x.getFirestore(),"nweets"),{text:r,createdAt:Date.now(),creatorId:e.userObj.uid,attachmentUrl:a});case 14:c(""),b("");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)("form",{onSubmit:d,className:"factoryForm",children:[Object(v.jsxs)("div",{className:"factoryInput__container",children:[Object(v.jsx)("input",{className:"factoryInput__input",value:r,onChange:function(e){var t=e.target.value;c(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),Object(v.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),Object(v.jsxs)("label",{for:"attach-file",className:"factoryInput__label",children:[Object(v.jsx)("span",{children:"Add photos"}),Object(v.jsx)(y.a,{icon:A.b})]}),Object(v.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;console.log(e),b(t)},n.readAsDataURL(t)},style:{opacity:0}}),j&&Object(v.jsxs)("div",{className:"factoryForm__attachment",children:[Object(v.jsx)("img",{src:j,alt:"fig",style:{backgroundImage:j}}),Object(v.jsxs)("div",{className:"factoryForm__clear",onClick:function(){b("")},children:[Object(v.jsx)("span",{children:"Remove"}),Object(v.jsx)(y.a,{icon:A.c})]})]})]})},U=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var e=x.query(x.collection(x.getFirestore(),"nweets"),x.orderBy("createdAt","desc"));x.onSnapshot(e,(function(e){var t=e.docs.map((function(e){return Object(S.a)({id:e.id},e.data())}));c(t)}))}),[]),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(F,{userObj:e.userObj}),Object(v.jsx)("div",{style:{marginTop:30},children:r.map((function(t){return Object(v.jsx)(I,{nweetObj:t,isOwner:t.creatorId===e.userObj.uid},t.id)}))})]})},_=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(e.userObj.displayName),i=Object(l.a)(s,2),j=i[0],d=i[1],p=Object(b.f)(),O=function(){var t=Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=x.query(x.collection(x.getFirestore(),"nweets"),x.where("creatorId","==",e.userObj.uid),x.orderBy("createdAt","desc")),x.onSnapshot(n,(function(e){var t=e.docs.map((function(e){return console.log(e.data()),Object(S.a)({id:e.id},e.data())}));c(t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){O()}),[]);var f=function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.userObj.displayName===j){t.next=5;break}return t.next=4,m.updateProfile(m.getAuth().currentUser,{displayName:j});case 4:e.refreshUser();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("form",{onSubmit:f,className:"profileForm",children:[Object(v.jsx)("input",{type:"text",placeholder:"Display name",onChange:function(e){var t=e.target.value;d(t)},value:j,autoFocus:!0,className:"formInput"}),Object(v.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),Object(v.jsx)("span",{children:"Profile"}),Object(v.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){m.getAuth().signOut(),p.push("/"),e.refreshUser()},children:"Log Out"}),Object(v.jsx)("div",{children:r.map((function(t){return Object(v.jsx)(I,{nweetObj:t,isOwner:t.creatorId===e.userObj.uid},t.id)}))})]})},B=function(e){return Object(v.jsx)("nav",{children:Object(v.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(v.jsx)("li",{children:Object(v.jsx)(j.b,{to:"/",style:{marginRight:10},children:Object(v.jsx)(y.a,{icon:N.c,color:"#04AAFF",size:"2x"})})}),Object(v.jsx)("li",{children:Object(v.jsxs)(j.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[Object(v.jsx)(y.a,{icon:A.e,color:"#04AAFF",size:"2x"}),Object(v.jsx)("span",{style:{marginTop:10},children:e.userObj.displayName?"".concat(e.userObj.displayName,"\uc758 Profile"):"Profile"})]})})]})})},D=function(e){return Object(v.jsxs)(j.a,{children:[e.isLoggedIn&&Object(v.jsx)(B,{userObj:e.userObj}),Object(v.jsx)(b.c,{children:e.isLoggedIn?Object(v.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:[Object(v.jsx)(b.a,{exact:!0,path:"/",children:Object(v.jsx)(U,{userObj:e.userObj})}),Object(v.jsx)(b.a,{exact:!0,path:"/profile",children:Object(v.jsx)(_,{userObj:e.userObj,refreshUser:e.refreshUser})})]}):Object(v.jsx)(b.a,{exact:!0,path:"/",children:Object(v.jsx)(k,{})})})]})};var P=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(m.getAuth().currentUser),s=Object(l.a)(c,2),i=s[0],j=s[1],b=Object(a.useState)(null),d=Object(l.a)(b,2),p=d[0],O=d[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.displayName&&""!==t.displayName){e.next=5;break}return n=t.email.indexOf("@"),a=t.email.substring(0,n),e.next=5,m.updateProfile(t,{displayName:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();m.getAuth().onAuthStateChanged(function(){var t=Object(u.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=7;break}return t.next=3,e(n);case 3:j(!0),O({displayName:n.displayName,uid:n.uid}),t.next=9;break;case 7:j(!1),O(null);case 9:r(!0);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(v.jsx)(v.Fragment,{children:n?Object(v.jsx)(D,{isLoggedIn:i,userObj:p,refreshUser:function(){var e=m.getAuth().currentUser;O({displayName:e.displayName,uid:e.uid})}}):"Initializing.."})};n(66);console.log("index.js"),console.log(h),s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(P,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.6843638e.chunk.js.map